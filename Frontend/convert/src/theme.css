/* ========================================
    DARK THEME - TAILWIND CSS VERSION
    Enhanced and optimized for Tailwind CSS
    ======================================== */

/* --- THEME TOGGLE BUTTON STYLING --- */
.theme-btn {
  @apply w-full border-none rounded-xl px-5 py-3 text-base font-semibold text-white cursor-pointer flex items-center justify-center gap-2.5 mb-6;
  background: linear-gradient(135deg, #6366f1, #8b5cf6);
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
}

.theme-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
}

.theme-btn:active {
  @apply translate-y-0;
}

/* ========================================
    DARK THEME STYLES ðŸŒ™
    ======================================== */

/* --- ROOT DARK THEME STYLES --- */
.dark-theme,
.dark-theme body,
html.dark-theme {
  @apply min-h-screen;
  background-color: #0a0e27 !important;
  color: #f1f5f9;
  /* Firefox Scrollbar */
  scrollbar-width: thin;
  scrollbar-color: #6366f1 #0a0e27;
}

/* Base content area */
.dark-theme .content {
  background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%) !important;
}

/* Force color inheritance and dark borders */
.dark-theme .content,
.dark-theme .content *:not(a):not(button):not(input) {
  color: inherit;
  border-color: #4b5563;
}

/* --- CONTAINER BACKGROUNDS --- */
.dark-theme .table-wrapper,
.dark-theme .steps-table-wrapper,
.dark-theme .steps-table-container,
.dark-theme .content table,
.dark-theme .json-table,
.dark-theme .application-table,
.dark-theme .steps-table {
  @apply rounded-xl;
  background-color: #2d3748 !important;
  box-shadow: 0 0 25px rgba(99, 102, 241, 0.3);
  border-color: #4b5563 !important;
}

.dark-theme .nested-table-wrapper {
  @apply rounded-lg;
  background: #1e2838 !important;
  border-left: 4px solid #8b5cf6;
  box-shadow: inset 0 0 20px rgba(139, 92, 246, 0.25);
}

.dark-theme .content .file-upload-wrapper {
  @apply border rounded-lg;
  background-color: #2d3748 !important;
  border-color: #4b5563;
  box-shadow: 0 0 20px rgba(99, 102, 241, 0.4);
}

/* --- STEPS WRAPPER H3 TITLE --- */
.dark-theme .steps-table-wrapper h3 {
  @apply rounded-t-xl;
  background: #1e293b !important;
  color: #e2e8f0 !important;
  border-bottom: 2px solid #475569 !important;
  box-shadow: none !important;
  text-shadow: none !important;
  padding: 12px 18px !important;
  border-left: 4px solid #6366f1 !important;
  font-size: 16px !important;
  font-weight: 700 !important;
}

.dark-theme .steps-table-wrapper h3::before {
  @apply hidden;
}

/* --- TEXT, HEADINGS, AND LINKS --- */
.dark-theme .content h2 {
  @apply font-extrabold;
  color: #c4b5fd;
  text-shadow: 0 0 20px rgba(139, 92, 246, 0.6);
}

.dark-theme .dialog-header h3 {
  color: #c4b5fd;
  text-shadow: 0 0 15px rgba(196, 181, 253, 0.6);
}

.dark-theme .placeholder {
  @apply text-white rounded-2xl;
  opacity: 0.7;
  background: linear-gradient(135deg, #1e2433 0%, #2d3748 100%);
  border: 2px dashed #6366f1;
  box-shadow: 0 0 30px rgba(99, 102, 241, 0.3);
  padding: 3rem;
}

.dark-theme a {
  @apply font-bold;
  color: #a78bfa;
  transition: color 0.2s ease, text-shadow 0.2s ease;
}

.dark-theme a:hover {
  color: #c4b5fd;
  text-shadow: 0 0 10px rgba(167, 139, 250, 0.6);
}

/* --- BUTTON OVERRIDES --- */
.dark-theme .theme-btn {
  box-shadow: 0 4px 20px rgba(99, 102, 241, 0.6), 0 0 15px rgba(99, 102, 241, 0.4);
}

.dark-theme .theme-btn:hover {
  box-shadow: 0 6px 25px rgba(99, 102, 241, 0.7), 0 0 20px rgba(139, 92, 246, 0.5);
}

.dark-theme .steps-actions button:hover {
  box-shadow: 0 4px 15px rgba(99, 102, 241, 0.5);
}

/* Steps action bar */
.dark-theme .steps-actions {
  @apply p-4 mt-0;
  background-color: #1e293b !important;
  border-radius: 0 0 12px 12px;
  border-top: 2px solid #334155 !important;
}

/* --- TABLE STYLING --- */

/* Headers */
.dark-theme thead {
  background: linear-gradient(135deg, #1e293b, #334155) !important;
}

.dark-theme th {
  @apply font-extrabold;
  color: #c4b5fd !important;
  text-shadow: 0 0 10px rgba(196, 181, 253, 0.5);
  border-bottom: 2px solid #6366f1;
  background-color: transparent !important;
}

.dark-theme .steps-table-wrapper .steps-table thead th {
  background: linear-gradient(135deg, #1e293b, #334155) !important;
  border-bottom: 2px solid #6366f1 !important;
}

/* Rows */
.dark-theme tbody tr {
  background-color: #2d3748 !important;
  transition: all 0.2s ease;
}

.dark-theme tbody tr:nth-child(even) {
  background-color: #374151 !important;
}

.dark-theme tbody tr:hover {
  background-color: #475569 !important;
  box-shadow: inset 0 0 20px rgba(99, 102, 241, 0.2);
  transform: scale(1.002);
}

/* Cells */
.dark-theme td {
  @apply font-semibold;
  color: #f1f5f9 !important;
  border-bottom: 1px solid #374151;
  border-right: 1px solid #374151;
  background-color: transparent !important;
}

/* New Row Highlight */
.dark-theme .new-step-row {
  animation: highlight-dark 1s ease;
}

@keyframes highlight-dark {
  0%, 100% { 
    background: transparent; 
  }
  50% { 
    background: rgba(139, 92, 246, 0.3); 
  }
}

/* --- INPUTS AND EDITABLE CELLS --- */
.dark-theme input[type="text"],
.dark-theme .application-input,
.dark-theme .step-input,
.dark-theme .editable-cell input,
.dark-theme .editable-cell textarea {
  @apply font-semibold;
  background-color: #1e293b !important;
  color: #f1f5f9 !important;
  border: 1px solid #475569 !important;
}

.dark-theme input[type="text"]:focus,
.dark-theme .application-input:focus,
.dark-theme .step-input:focus,
.dark-theme .editable-cell input:focus,
.dark-theme .editable-cell textarea:focus {
  border-color: #8b5cf6 !important;
  box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.3), 0 0 15px rgba(139, 92, 246, 0.4);
  background-color: #334155 !important;
}

.dark-theme .editable-cell:hover:not(.is-editing) {
  background-color: #334155;
}

.dark-theme .editable-cell {
  color: #f1f5f9 !important;
}

/* --- MODAL/DIALOGS STYLING --- */

/* Modal Overlay */
.dark-theme .modal-overlay {
  background: rgba(0, 0, 0, 0.85) !important;
  backdrop-filter: blur(8px);
}

/* Settings Dialog */
.dark-theme .settings-dialog {
  @apply border rounded-2xl;
  background-color: #1e293b !important;
  box-shadow: 0 0 30px rgba(139, 92, 246, 0.5), 0 10px 40px rgba(0, 0, 0, 0.5);
  border-color: #475569;
}

.dark-theme .dialog-header {
  background: linear-gradient(135deg, #1e293b, #334155) !important;
  border-bottom: 2px solid #475569;
}

/* Dialog Children */
.dark-theme .settings-dialog > *,
.dark-theme .dialog-content,
.dark-theme .dialog-actions {
  @apply p-4 m-0;
  background-color: #1e293b !important;
  border-top: none !important;
}

/* Dialog Actions Bar */
.dark-theme .dialog-actions {
  background-color: #2d3748 !important;
  border-top: 2px solid #475569 !important;
}

/* Dialog Buttons */
.dark-theme .close-btn { 
  color: #f1f5f9; 
}

.dark-theme .close-btn:hover {
  background: rgba(139, 92, 246, 0.2) !important;
}

.dark-theme .cancel-btn {
  @apply border;
  color: #f1f5f9;
  border-color: #4b5563;
  transition: background-color 0.2s ease;
}

.dark-theme .cancel-btn:hover { 
  background-color: #334155; 
}

.dark-theme .save-btn:hover {
  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.6), 0 0 15px rgba(16, 185, 129, 0.4);
}

/* --- SCROLLBARS (Webkit) --- */
.dark-theme ::-webkit-scrollbar {
  @apply w-2.5 h-2.5;
}

.dark-theme ::-webkit-scrollbar-track {
  @apply rounded;
  background: #1e293b !important;
}

.dark-theme ::-webkit-scrollbar-thumb {
  @apply rounded;
  background: linear-gradient(135deg, #475569, #6366f1) !important;
  border: 2px solid #1e293b;
}

.dark-theme ::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(135deg, #6366f1, #8b5cf6) !important;
  box-shadow: 0 0 10px rgba(139, 92, 246, 0.5);
}

/* Specific area scrollbars */
.dark-theme .content::-webkit-scrollbar-track,
.dark-theme .dialog-content::-webkit-scrollbar-track,
.dark-theme .table-wrapper::-webkit-scrollbar-track,
.dark-theme .steps-table-wrapper::-webkit-scrollbar-track {
  background: #0a0e27 !important;
}

.dark-theme .content::-webkit-scrollbar-thumb,
.dark-theme .dialog-content::-webkit-scrollbar-thumb,
.dark-theme .table-wrapper::-webkit-scrollbar-thumb,
.dark-theme .steps-table-wrapper::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, #6366f1, #8b5cf6) !important;
}

/* --- MISC UI FIXES --- */
.dark-theme .resize-handle:hover {
  background: #8b5cf6;
  box-shadow: 0 0 10px rgba(139, 92, 246, 0.6);
}

.dark-theme .content .file-name {
  color: #f1f5f9;
}

/* Color inheritance */
.dark-theme .json-table * {
  color: inherit;
}

/* Application table fixes */
.dark-theme .application-table tbody,
.dark-theme .application-table thead {
  background-color: transparent !important;
}

.dark-theme .application-table td[style] {
  background-color: #374151 !important;
}

/* Table wrapper headers */
.dark-theme .table-wrapper h3 {
  color: #c4b5fd !important;
  border-left-color: #8b5cf6 !important;
  text-shadow: 0 0 10px rgba(196, 181, 253, 0.4);
}

.dark-theme .table-wrapper h3:hover {
  color: #ddd6fe !important;
}

/* ========================================
    CRITICAL: WHITE BACKGROUND OVERRIDES ðŸ’€
    ======================================== */

/* Aggressive white background crushers */
.dark-theme [style*="background: #fff"],
.dark-theme [style*="background: white"],
.dark-theme [style*="background-color: #fff"],
.dark-theme [style*="background-color: white"],
.dark-theme [style*="background-color: rgb(255"],
.dark-theme [style*="background: rgb(255"] {
  background-color: #2d3748 !important;
}

/* Override light backgrounds in content */
.dark-theme .content div[style*="background"],
.dark-theme .content section[style*="background"] {
  background-color: #2d3748 !important;
}

/* Dialog white background overrides */
.dark-theme .settings-dialog [style*="background: #fff"],
.dark-theme .settings-dialog [style*="background-color: #fff"] {
  background-color: #1e293b !important;
}

/* Ensure containers inherit parent colors */
.dark-theme .content > *,
.dark-theme .settings-dialog > *,
.dark-theme .modal-overlay * {
  background-color: inherit;
}